<!-- ------------------Section commeneted by developer dont remove , it will integrated in future-------------- -->
<section class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-20 relative overflow-hidden pt-35">
    <div class="absolute inset-0 opacity-10">
        <div class="absolute top-10 left-10 w-32 h-32 bg-blue-400 rounded-full animate-pulse"></div>
        <div class="absolute top-32 right-20 w-24 h-24 bg-purple-400 rounded-full animate-bounce"
            style="animation-delay: 1s;"></div>
        <div class="absolute bottom-20 left-1/3 w-20 h-20 bg-indigo-400 rounded-full animate-ping"
            style="animation-delay: 2s;"></div>
    </div>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
        <h1 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6 animate-fade-in ">
            <span class="bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">Run a Quick Test â€“
                Try It!</span>
        </h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto animate-fade-in" style="animation-delay: 0.3s;">"Drag & drop
            your document to review the code."</p>
    </div>
</section>

<section class="py-10">

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-center items-center" *ngIf="isLoading">
            <div class="mr-3 size-15 animate-spin text-blue-500">
                <svg class="w-full h-full" viewBox="0 0 24 24" fill="none">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
                </svg>
            </div>
        </div>

        <ng-container *ngIf="isShowUpload && !isLoading">
            <div class="space-y-20 space-x-2">
                <div class="flex lg:flex-row flex-col  gap-12 items-start max-w-7xl">
                    <div class="space-y-4 space-x-2 flex-1 w-full">
                        <div *ngIf="markets">
                            <p class="mb-1">For guidelines,</p>
                            <div class="flex space-x-3 ml-2">
                                <div class="flex space-x-3" *ngFor="let item of markets">
                                    <label>
                                        <input type="radio" name="markets" class="cursor-pointer" [value]="item.name"
                                            [(ngModel)]="selectedMarketName" />
                                         {{ item.name }}
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="border-2 border-dashed rounded-xl p-8 text-center transition-colors border-gray-300 hover:border-blue-400 hover:bg-gray-50"
                            (dragover)="onDragOver($event)" (drop)="onDrop($event)">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                class="lucide lucide-upload h-12 w-12 text-gray-400 mx-auto mb-4" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" x2="12" y1="3" y2="15"></line>
                            </svg>
                            <p class="text-lg font-medium text-gray-700 mb-2">Drag & drop your medical document here</p>
                            <p class="text-sm text-gray-500 mb-4">Supports PDF files up to 1MB</p>

                            <button type="button"
                                class="inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 mt-2 cursor-pointer"
                                (click)="fileInput.click()">
                                Choose File
                            </button>
                            <input #fileInput type="file"
                                accept=".pdf,.docx,.rtf,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/rtf"
                                class="hidden" (change)="onFileSelected($event)" />

                            <div *ngIf="selectedFileName"
                                class="text-sm text-blue-600 flex justify-center gap-1 items-center mt-2"> <span
                                    class="truncate max-w-xs">Uploaded Filename: {{ selectedFileName }}</span>
                                <button (click)="clearUploadedFile()"
                                    class="text-red-500 hover:text-red-700 cursor-pointer" title="Clear file">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <line x1="18" y1="6" x2="6" y2="18" />
                                        <line x1="6" y1="6" x2="18" y2="18" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <!-- <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <button
                            class="text-center p-4 bg-white rounded-lg shadow-sm border border-gray-100 cursor-pointer"
                            (click)="onSubmit('redact')">
                            <div *ngIf="isSubmittingRedact; else redactIcon"
                                class="flex justify-center items-center h-8 mb-2">
                                <svg class="animate-spin h-6 w-6 text-green-500" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                        stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor"
                                        d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 11-8 8z"></path>
                                </svg>
                            </div> <ng-template #redactIcon>

                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="h-8 w-8 text-green-500 mx-auto mb-2">
                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                                    <rect x="6" y="9" width="12" height="4" fill="currentColor" />
                                </svg></ng-template>
                            <p class="text-sm font-medium text-gray-700">Redact</p>
                        </button>
                        <div class="text-center p-4 bg-white rounded-lg shadow-sm border border-gray-100 cursor-pointer"
                            (click)="onSubmit('code')">

                            <div *ngIf="isSubmittingCode; else codeIcon"
                                class="flex justify-center items-center h-8 mb-2">
                                <svg class="animate-spin h-6 w-6 text-blue-500" xmlns="http://www.w3.org/2000/svg"
                                    fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                        stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor"
                                        d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 11-8 8z"></path>
                                </svg>
                            </div>
                            <ng-template #codeIcon>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="h-8 w-8 text-blue-500 mx-auto mb-2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                    <path d="M14 2v6h6" />
                                    <path d="M8 13h2" />
                                    <path d="M8 17h2" />
                                    <path d="M12 13h4" />
                                    <path d="M12 17h4" />
                                </svg>
                            </ng-template>
                            <p class="text-sm font-medium text-gray-700">Code</p>
                        </div>

                    </div> -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <button
                                class="text-center p-4 bg-white rounded-xl shadow-sm border border-gray-100 cursor-pointer transition-all duration-200 hover:shadow-md hover:border-transparent hover:bg-green-50 group"
                                (click)="onSubmit('redact')">
                                <div *ngIf="isSubmittingRedact; else redactIcon"
                                    class="flex justify-center items-center h-8 mb-3">
                                    <svg class="animate-spin h-6 w-6 text-green-600" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                            stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor"
                                            d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 11-8 8z"></path>
                                    </svg>
                                </div>
                                <ng-template #redactIcon>
                                    <div
                                        class="h-8 w-8 mb-3 mx-auto flex items-center justify-center rounded-full bg-green-100 group-hover:bg-green-200 transition-colors duration-200">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-green-600">
                                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                                            <rect x="6" y="9" width="12" height="4" fill="currentColor" />
                                        </svg>
                                    </div>
                                </ng-template>
                                <p
                                    class="text-sm font-medium text-gray-700 group-hover:text-green-700 transition-colors duration-200">
                                    Redact</p>
                            </button>

                            <button
                                class="text-center p-4 bg-white rounded-xl shadow-sm border border-gray-100 cursor-pointer transition-all duration-200 hover:shadow-md hover:border-transparent hover:bg-blue-50 group"
                                (click)="onSubmit('code')">
                                <div *ngIf="isSubmittingCode; else codeIcon"
                                    class="flex justify-center items-center h-8 mb-3">
                                    <svg class="animate-spin h-6 w-6 text-blue-600" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                            stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor"
                                            d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 11-8 8z"></path>
                                    </svg>
                                </div>
                                <ng-template #codeIcon>
                                    <div
                                        class="h-8 w-8 mb-3 mx-auto flex items-center justify-center rounded-full bg-blue-100 group-hover:bg-blue-200 transition-colors duration-200">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" class="text-blue-600">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                            <path d="M14 2v6h6" />
                                            <path d="M8 13h2" />
                                            <path d="M8 17h2" />
                                            <path d="M12 13h4" />
                                            <path d="M12 17h4" />
                                        </svg>
                                    </div>
                                </ng-template>
                                <p
                                    class="text-sm font-medium text-gray-700 group-hover:text-blue-700 transition-colors duration-200">
                                    Code</p>
                            </button>
                        </div>
                    </div>


                    <div
                        class="bg-white rounded-2xl flex-1 w-full shadow-xl px-4 md:px-6 pt-4 pb-3 border border-gray-100">


                        <h3 class="text-lg font-semibold text-gray-700 mb-2"
                            *ngIf="responses && !isSubmittingRedact && !isSubmittingCode && !isAskingQuestion">
                            {{ currentAction === 'redact' ? 'Redacted Text' : (currentAction === 'code' ? 'Coding
                            Results' :
                            'Answer') }}
                        </h3>

                        <div
                            class="text-start py-2 h-90 overflow-auto bg-gray-200 border-1 border-gray-300 rounded-md text-black md:px-3 px-1">

                            <div *ngIf="isSubmittingCode || isSubmittingRedact || isAskingQuestion"
                                class="flex justify-center items-center h-full">
                                <div
                                    class="w-10 h-10 border-3 border-purple-600 border-t-transparent rounded-full animate-spin">
                                </div>

                            </div>
                            <pre class="text-gray-500 text-wrap"
                                *ngIf="responses && !(isSubmittingCode || isSubmittingRedact || isAskingQuestion)">
    {{ responses }}
  </pre>

                            <ng-template
                                [ngIf]="!responses && !(isSubmittingCode || isSubmittingRedact || isAskingQuestion)">
                                <div class="flex justify-center items-center h-full">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round"
                                        class="lucide lucide-code h-16 w-16 text-gray-300 mx-auto mb-4">
                                        <polyline points="16 18 22 12 16 6"></polyline>
                                        <polyline points="8 6 2 12 8 18"></polyline>
                                    </svg>
                                </div>
                            </ng-template>
                        </div>

                        <div class="mt-2 flex  md:flex-row flex-col items-center space-x-2">
                            <input type="text"
                                class="flex-1 w-full  border-[1px] focus:outline-1 border-gray-400 rounded-md py-2 px-2"
                                placeholder="Ask your question" [(ngModel)]="question" />
                            <div class="text-center flex p-2 md:p-3 mt-2 md:mt-0 space-x-2 text-white  gap-1 items-center bg-blue-600 rounded-lg shadow-sm border border-gray-100 cursor-pointer"
                                (click)="askQuestion()">
                                <div *ngIf="isAskingQuestion; else askIcon" class="flex justify-center items-center  ">
                                    <svg class="animate-spin h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg"
                                        fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                            stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor"
                                            d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 11-8 8z"></path>
                                    </svg>
                                </div> <ng-template #askIcon>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" class="h-4 w-4 text-white mx-auto ">
                                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
                                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
                                        <line x1="12" y1="17" x2="12.01" y2="17" />
                                    </svg>
                                </ng-template>
                                <p class="text-sm font-medium text-white">Ask Question</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </ng-container>
        <ng-container *ngIf="!isShowUpload && !isLoading">
            <div class="flex justify-center items-center h-full">
                <h3 class="text-md md:text-2xl"> Currently Service Unavailable,
                    Please try again later.</h3>
            </div>
        </ng-container>
    </div>
</section>